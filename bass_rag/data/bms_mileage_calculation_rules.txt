ðŸ”§ BMS ê¸°ë°˜ ì£¼í–‰ê±°ë¦¬ ì‚°ì • ë¡œì§ â€” System Prompt (ì „ë ¥ ê³„ì‚° í¬í•¨ ë²„ì „)

ë‹¤ìŒì€ EV BMS ë°ì´í„° ê¸°ë°˜ ì£¼í–‰ê±°ë¦¬ ê³„ì‚° ë¡œì§ì˜ ì ˆëŒ€ ê·œì¹™ì´ë‹¤.

ëª¨ë“  ì„¤ëª…Â·ìš”ì•½Â·ì½”ë“œ ìƒì„± ì‹œ ì•„ëž˜ ê¸°ì¤€ì„ ë°˜ë“œì‹œ ì¤€ìˆ˜í•œë‹¤.

âœ… 1. ë°ì´í„° ì†ŒìŠ¤ ê·œì¹™

BMS ë°ì´í„°ë§Œ ì‚¬ìš©í•˜ë©° GPS ì •ë³´ëŠ” ì ˆëŒ€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.

ì‚¬ìš© ê°€ëŠ¥ í•„ë“œ:
- odometer (ëˆ„ì  ì£¼í–‰ê±°ë¦¬, km) [BMS í…Œì´ë¸” ì»¬ëŸ¼]
- pack_volt (íŒ© ì „ì••, V) [BMS í…Œì´ë¸” ì»¬ëŸ¼]
- pack_current (íŒ© ì „ë¥˜, A) [BMS í…Œì´ë¸” ì»¬ëŸ¼]
- emobility_spd (ì†ë„, km/h) [BMS í…Œì´ë¸” ì»¬ëŸ¼]

âš ï¸ ì¤‘ìš”: p_kwëŠ” BMS í…Œì´ë¸”ì— ì¡´ìž¬í•˜ëŠ” ì‹¤ì œ ì»¬ëŸ¼ì´ ì•„ë‹™ë‹ˆë‹¤!
p_kwëŠ” pack_voltì™€ pack_currentë¡œë¶€í„° ê³„ì‚°ë˜ëŠ” ê°’ìž…ë‹ˆë‹¤.
p_kw = (pack_voltage * pack_current) / 10000

ë°ì´í„°ëŠ” 5ë¶„ ê°„ê²© ì§‘ê³„ ë°ì´í„°ì´ë‹¤.

âœ… 2. ì „ë ¥ ê³„ì‚° ê·œì¹™ (Power Calculation)

BMS ì „ë ¥ ê°’ì€ ë‹¤ìŒ ë‘ ê°€ì§€ ì›ì²œ ì¤‘ í•˜ë‚˜ë¡œ ì œê³µë  ìˆ˜ ìžˆë‹¤.

ðŸ”¹ (1) BMSì—ì„œ ì „ë ¥ì„ ì§ì ‘ ì œê³µí•˜ëŠ” ê²½ìš° (í˜„ìž¬ëŠ” í•´ë‹¹ ì—†ìŒ)
- âš ï¸ ì£¼ì˜: BMS í…Œì´ë¸”ì—ëŠ” p_kw ì»¬ëŸ¼ì´ ì—†ìŠµë‹ˆë‹¤!
- í˜„ìž¬ BMS í…Œì´ë¸”ì—ëŠ” pack_voltì™€ pack_currentë§Œ ìžˆìŠµë‹ˆë‹¤.
- ë”°ë¼ì„œ í•­ìƒ (2) ë°©ë²•ìœ¼ë¡œ ê³„ì‚°í•´ì•¼ í•©ë‹ˆë‹¤.

ðŸ”¹ (2) ì „ì••Â·ì „ë¥˜ ê¸°ë°˜ìœ¼ë¡œ ì „ë ¥ì„ ê³„ì‚°í•´ì•¼ í•˜ëŠ” ê²½ìš°
BMSê°€ p_kwë¥¼ ì œê³µí•˜ì§€ ì•Šê³  ì›ì‹œ ì „ì••/ì „ë¥˜ë§Œ ì œê³µí•˜ë©´ ë‹¤ìŒ ê³µì‹ìœ¼ë¡œ ê³„ì‚°í•œë‹¤:

ì „ë ¥(P, kW) ê³„ì‚° ê³µì‹:
p_kw = (pack_voltage * pack_current) / 10000

âš  ì „ë¥˜ ë¶€í˜¸(Sign) ê·œì¹™
- ì¶©ì „ ì‹œ: ì „ë¥˜(current)ëŠ” ì–‘ìˆ˜
- ë°©ì „(ì£¼í–‰) ì‹œ: ì „ë¥˜(current)ëŠ” ìŒìˆ˜
- ë”°ë¼ì„œ ê³„ì‚°ëœ p_kwë„ ê°™ì€ ë¶€í˜¸ë¥¼ ê°–ëŠ”ë‹¤:
  - p_kw > 0 â†’ ì¶©ì „
  - p_kw < 0 â†’ ë°©ì „(ì£¼í–‰ ì¤‘)

ðŸ”¹ (3) ì „ë ¥ ìž„ê³„ê°’ (ìƒíƒœ íŒë‹¨ìš©)
ìƒíƒœ ë¶„ë¥˜ì— ì‚¬ìš©í•˜ëŠ” ì „ë ¥ ê¸°ì¤€ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.
- ì¶©ì „ ìƒíƒœ: p_kw > 4.0
- Idle(ì •ì°¨): abs(p_kw) < 0.5 AND speed == 0

ì´ ê°’ë“¤ì€ ì‹¤ì¦ ê¸°ë°˜ thresholdì´ë©° ë³€ê²½ ê°€ëŠ¥í•˜ì§€ë§Œ,
ì£¼í–‰ê±°ë¦¬ ì‚°ì • ë¡œì§ì—ì„œëŠ” ì´ ê¸°ì¤€ì„ ë°˜ë“œì‹œ ë”°ë¥¸ë‹¤.

âœ… 3. ìƒíƒœ ë¶„ë¥˜ ê·œì¹™ (State Classification)

ìƒíƒœ	ì¡°ê±´
ì¶©ì „	p_kw > 4.0
ì •ì°¨(Idle)	abs(p_kw) < 0.5 AND speed == 0
ì£¼ì°¨/ì •ì°¨	speed == 0
ì €ì†	0 < speed < 3.0
ì£¼í–‰(Discharge)	speed â‰¥ 3.0

âš  ì£¼í–‰/ì¶©ì „ íŒë‹¨ì€ í•­ìƒ p_kw + ì†ë„ ì¡°í•©ìœ¼ë¡œ íŒë‹¨í•œë‹¤.
ì£¼í–‰ê±°ë¦¬ ê³„ì‚°ì—ëŠ” ì˜¤ë„ë¯¸í„°ë§Œ ì‚¬ìš©í•œë‹¤.

âœ… 4. ì„¸ê·¸ë¨¼íŠ¸ ìƒì„± ê·œì¹™

- ìƒíƒœê°€ ë°”ë€” ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ ì„¸ê·¸ë¨¼íŠ¸ ìƒì„±
- ìµœì†Œ 5ë¶„ ì´ìƒ ì§€ì†ëœ êµ¬ê°„ë§Œ ìœ íš¨ ì„¸ê·¸ë¨¼íŠ¸
- ì„¸ê·¸ë¨¼íŠ¸ mileage ê³„ì‚°:
  seg_mileage = max(0, end_odo - start_odo)

âœ… 5. ì„¸ê·¸ë¨¼íŠ¸ ê²€ì¦ ê·œì¹™

ë‹¤ìŒ ì¡°ê±´ ì¤‘ í•˜ë‚˜ë¼ë„ ë§Œì¡±í•˜ë©´ ì„¸ê·¸ë¨¼íŠ¸ëŠ” ì˜¤ë¥˜ë¡œ ê°„ì£¼í•˜ì—¬ ì œì™¸í•œë‹¤.
- ì´ë™ê±°ë¦¬ â‰¥ 10,000km
- ìƒíƒœ = "ì£¼í–‰" AND ì´ë™ê±°ë¦¬ â‰¤ 0
- ìƒíƒœ â‰  "ì£¼í–‰" AND ì´ë™ê±°ë¦¬ â‰  0

âœ… 6. ì›”ë³„ ì£¼í–‰ê±°ë¦¬ ê³„ì‚° ê·œì¹™

ë°˜ë“œì‹œ ì£¼í–‰(Discharge) ì„¸ê·¸ë¨¼íŠ¸ë§Œ ë°˜ì˜í•œë‹¤.
month_mileage = Î£(seg_mileage for all segments where state == "ì£¼í–‰")

âœ… 7. ì „ì²´ ëˆ„ì  mileage ê²€ì¦

- ì „ì²´ mileageê°€ ì›”í‰ê·  í—ˆìš©ì¹˜(10,000 Ã— months)ë¥¼ ì´ˆê³¼í•˜ë©´ NaN
- ì „ì²´ mileage â‰¤ 0 â†’ NaN

âœ… 8. ìµœì¢… ì¶œë ¥ êµ¬ì¡°

- ì „ì²´ ëˆ„ì  ì£¼í–‰ê±°ë¦¬
- ì›”ë³„ ì£¼í–‰ê±°ë¦¬
- ìš´í–‰ ì‹œìž‘/ì¢…ë£Œ ì‹œê°
- ì´ ìš´í–‰ì¼ìˆ˜
- ì¼í‰ê·  ì£¼í–‰ê±°ë¦¬
- ë§ˆì§€ë§‰ ì˜¤ë„ë¯¸í„° ê°’

ðŸŽ¯ ì´ ê·œì¹™ì˜ ëª©ì 

- BMS ì „ë ¥ ê³„ì‚° ê¸°ì¤€ì„ í†µì¼
- GPS ë°ì´í„°ì™€ í˜¼ë™ë˜ëŠ” ê²ƒì„ ë°©ì§€
- ëª¨ë“  mileage ê¸°ë°˜ ê³„ì‚°ì€ ì˜¤ë„ë¯¸í„° ì°¨ì´ë¡œë§Œ ìˆ˜í–‰
- ì¶©ì „/ì •ì°¨/ì €ì† êµ¬ê°„ mileage ì˜¤ë¥˜ ì œê±°
- ì›”ë³„-ì „ì²´ mileage ì‚°ì • ë¡œì§ì„ ì •í™•í•˜ê²Œ ì ìš©

âš  ì¤‘ìš”: ê±°ë¦¬ì™€ odometer ê°„ì˜ ìƒê´€ ê´€ê³„ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ì´ ê·œì¹™ì„ ë°˜ë“œì‹œ ì¤€ìˆ˜í•´ì•¼ í•œë‹¤.

